<html>
   <head>
      <link href="./css/bootstrap.min.css" rel="stylesheet">
      <link href="./css/stylesheet.css" rel="stylesheet">
      <link rel="stylesheet" href="../css/bootstrap.min.css">
         <script src="./js/demo.js"></script>
         <script src="./js/jquery-3.3.1.min.js"></script>
         <script src="./js/bootstrap.min.js"></script>
         <script src="./js/index.js"></script>
   </head>
   <body  onload="userIsLoggedIn();">

       <nav class="navbar navbar-expand-lg navbar-light bg-light">
  			<a class="navbar-brand" href="./index.html">My Secret Diary</a>
  			<button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
    <span class="navbar-toggler-icon"></span>
  </button>
  <div class="collapse navbar-collapse" id="navbarNav">
    <ul class="navbar-nav mr-auto">
      
	<div id="userNavLeft"></div>
    </ul>
    <ul class="nav navbar-nav"> 
	<div id="userNavRight"></div>
     </ul>
    
  </div>
</nav>
<div class='container jumbo-container'>
	<div id="publicPosts">
		<div id="public_diary"></div>
		<script>
			$.ajax({
		url: 'http://localhost:8080/diary', 
		type : "GET", 
		success : function(data){
		    if (data.status == true) {
			console.log("loading diary");
			for (x in data.result) {

				$("#public_diary").append(
				"<div class='card'style='width: 100%;'>" +
						  "<div class='card-body'>" +
						    "<h5 class='card-title'>" + data.result[x].title + "</h5>" + 
						    "<h6 class='card-subtitle mb-2 text-muted'>By: "+ data.result[x].author +"<br>On: "+ data.result[x].publish_date +"</h6>"+
						    "<p class='card-text'>"+ data.result[x].text +"</p>"+
						    "<a href='#' class='card-link' data-toggle='modal' data-target=" + "#"+x+ ">Read more</a>"+
						  "</div>"+
				"</div><br><br>"+


				"<div class='modal fade' id='"+x+"' tabindex='-1' role='dialog' aria-labelledby='exampleModalLabel' aria-hidden='true'>"+
				  "<div class='modal-dialog' role='document'>"+
				    "<div class='modal-content'>"+
				      "<div class='modal-header'>"+
					"<h5 class='modal-title' id='exampleModalLabel'>"+data.result[x].title+"</h5>"+
					"<button type='button' class='close' data-dismiss='modal' aria-label='Close'>"+
					  "<span aria-hidden='true'>&times;</span>"+
					"</button>"+
				      "</div>"+
				      "<div class='modal-body'>"+
					"<p>Published by: "+ data.result[x].author +"<br>On: "+ data.result[x].publish_date +"</p>"+
				       "<p>"+ data.result[x].text +"</p>"+
				      "</div>"+
				      "<div class='modal-footer'>"+
					"<button type='button' class='btn btn-secondary' data-dismiss='modal'>Close</button>"+
				      "</div>"+
				    "</div>"+
				  "</div>"+
				"</div>"
		
				

				)


			}
		    }
		    else {
		    }

		},
		error: function(xhr, resp, text) {
		    console.log(xhr, resp, text);
		}
	});

		</script>
	</div>

</div>


         <p>Requirements for the front end are as follows:</p>
         <ul>
            <li>Register a user</li>
            <li>Login</li>
            <li>Logout</li>
            <li>Display all public diary entries</li>
            <li>Display an authenticated user's diary entries</li>
            <li>Create a new diary entry</li>
            <li>Delete an existing diary entry</li>
            <li>Toggle the permissions on an existing diary entry</li>
         </ul>



         <div id="demo_heartbeat">
         </div>
         <div id="demo_members">
         </div>
         <div id="demo_short_answer_questions">weeee
         </div>
         <footer class="footer">
            <p>&copy; CS5331 Assignment 1 Group 10</p>
         </footer>
         </div>

         <script src="./js/demo.js"></script>
         <script src="./js/jquery-3.3.1.min.js"></script>
         <script src="./js/bootstrap.min.js"></script>
	<script src="./js/login.js"></script>
	

   </body>
</html>
